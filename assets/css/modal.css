/* =========================
   modal.css (optimizado)
   - Scroll seguro en iOS
   - Duraciones leídas por JS
   - Submodal full-screen scrolleable
   ========================= */

:root {
  --modal-backdrop-ms: 260ms;
  --modal-open-ms: 900ms;
  --modal-close-ms: 420ms;

  /* gap vertical para que no pegue al borde en pantallas chicas */
  --modal-viewport-pad: 16px;
}

/* ---------- MODAL SIMPLE (base) ---------- */
.modal-simple {
  position: fixed;
  inset: 0;
  display: grid;
  grid-template-rows: 1fr;
  align-items: center;
  justify-items: center;
  z-index: 99990;

  pointer-events: none;
  opacity: 0;
  transition: opacity var(--modal-backdrop-ms) ease;
}

/* Backdrop */
.modal-simple .modal__backdrop {
  position: absolute;
  inset: 0;
  background: var(--color-fede-black-cc);
  opacity: 0;
  transition: opacity var(--modal-backdrop-ms) ease;
  -webkit-backdrop-filter: blur(6px);
  backdrop-filter: blur(6px);
}

/* Dialog (contenedor) */
.modal-simple .modal__dialog {
  position: relative;
  display: flex;
  flex-direction: column;

  background: var(--color-fede-white);
  border-radius: 10px;

  /* clave: permite scroll interno sin depender del body */
  max-height: calc(100dvh - (var(--modal-viewport-pad) * 2));
  overflow: hidden;

  /* safe-area */
  padding: 48px 64px;

  /* estado inicial para animación */
  opacity: 0;
  transform: translateY(-18vh);
  will-change: transform, opacity;
}

/* Contenido scrolleable (si el contenido crece) */
.modal-simple .content {
  display: flex;
  flex-direction: column;
  gap: 36px;

  /* scroll interno */
  min-height: 0;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
  touch-action: pan-y;
}

/* Estado abierto */
.modal-simple.is-open {
  pointer-events: auto;
  opacity: 1;
}
.modal-simple.is-open .modal__backdrop {
  opacity: 1;
}
.modal-simple.is-open .modal__dialog {
  animation: modalDropBounce var(--modal-open-ms) ease both;
}

/* Estado cerrando */
.modal-simple.is-closing {
  pointer-events: none;
  opacity: 0;
}
.modal-simple.is-closing .modal__backdrop {
  opacity: 0;
}
.modal-simple.is-closing .modal__dialog {
  animation: modalUpOut var(--modal-close-ms) ease both;
}

@keyframes modalDropBounce {
  0% {
    opacity: 0;
    transform: translateY(-100dvh);
  }
  55% {
    opacity: 1;
    transform: translateY(1.25vh);
  }
  78% {
    opacity: 1;
    transform: translateY(-0.25vh);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}
@keyframes modalUpOut {
  from {
    opacity: 1;
    transform: translateY(0);
  }
  to {
    opacity: 0;
    transform: translateY(-100dvh);
  }
}

/* ---------- BOTÓN CERRAR (si lo usás como link) ---------- */
.modal-full a.close,
.modal-simple a.close {
  width: 568px;
  height: 41px;
  background-image: url(../img/modal-button-close.png);
  background-size: contain;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 10px auto;
  border-radius: 2px;
  font-size: 16px;
  color: var(--color-fede-fv);
  z-index: 9999999;
  transition: all 0.2s ease-in-out;
}
.modal-full a:hover.close,
.modal-simple a:hover.close {
  color: var(--color-fede-white);
  background-color: var(--color-fede-fv);
  border-radius: 6px;
}

/* ---------- SUBMODAL (full-screen) ---------- */
.modal-simple.submmodal {
  align-items: stretch;
  justify-items: stretch;
}

.modal-simple.submmodal .modal__backdrop {
  background: transparent !important;
  -webkit-backdrop-filter: none;
  backdrop-filter: none;
}

.modal-simple.submmodal .modal__dialog {
  width: 100%;
  height: 100dvh;
  max-height: 100dvh;
  border-radius: 0;

  /* padding con safe-area */
  padding: calc(60px + env(safe-area-inset-top)) 60px
    calc(120px + env(safe-area-inset-bottom)) 60px;

  gap: 95px;
  background: #ffffffee;
}

.modal-simple.submmodal .content {
  /* clave para que el scroll viva acá */
  flex: 1 1 auto;
  min-height: 0;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
  touch-action: pan-y;

  align-items: stretch !important;
  justify-content: flex-start !important;

  padding-bottom: 40px;
}

.modal-simple.submmodal .modal__dialog h3 {
  font-size: 35px;
  font-weight: 800;
  line-height: 48px;
  text-align: center;
  text-transform: uppercase;
  margin-bottom: 5px;
}

.modal-simple.submmodal .bg-vectors {
  margin-top: 26px;
  z-index: -1;
}

.modal-simple.submmodal .works-items {
  width: 100%;
  max-width: 1320px;
  display: flex;
  gap: 40px 64px;
  justify-items: center;
  justify-content: center;
}

.modal-simple.submmodal .works-items a {
  color: var(--color-fede-fv);
  background-color: transparent;
  text-align: center;
  font-size: 14px;
  font-weight: 400;
  letter-spacing: 6px;
  padding: 6px 6px 6px 12px;
  border-radius: 7px;
  transition: all 0.35s ease-in-out;
}
.modal-simple.submmodal .works-items a:hover {
  color: var(--color-fede-white);
  background-color: var(--color-fede-fv);
}

.modal-simple.submmodal a.submodal-close {
  position: absolute;
  top: calc(74px + env(safe-area-inset-top));
  right: calc(74px + env(safe-area-inset-right));
  width: 24px;
  height: 24px;
  opacity: 0.5;
  transition: all 0.2s ease-in-out;
}
.modal-simple.submmodal a:hover.submodal-close {
  opacity: 1;
}

/* ---------- SERVICES MODALS (si los usás) ---------- */
.modal-simple.services-modals .modal__dialog {
  min-height: unset;
  width: 732px;
  border-radius: 10px;
  padding: 48px 64px;
  gap: 54px;
  flex-direction: column;
}
.modal-simple.services-modals header {
  margin-bottom: 16px;
}
.modal-simple.services-modals header span {
  display: inline-flex;
  align-items: center;
  gap: 8px;
}
.modal-simple.services-modals .works-items {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px 16px;
  margin-block: 16px;
}
.modal-simple.services-modals .works-items a {
  text-decoration: none;
  color: #111;
  padding: 4px 0;
  line-height: 1.2;
}
.modal-simple.services-modals .works-items a:hover {
  text-decoration: underline;
}

/* ---------- Reduced motion ---------- */
@media (prefers-reduced-motion: reduce) {
  .modal-simple,
  .modal-simple .modal__backdrop {
    transition: none !important;
  }
  .modal-simple.is-open .modal__dialog,
  .modal-simple.is-closing .modal__dialog {
    animation: none !important;
  }
  .modal-simple .modal__dialog {
    opacity: 1 !important;
    transform: none !important;
  }
}
